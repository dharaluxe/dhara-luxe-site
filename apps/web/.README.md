# Dhara Luxe â€” Web app notes (Supabase additions)

This file documents the new Supabase client wiring and server-side waitlist API.

Server-side environment variables required for API endpoints that write to the database:
- NEXT_PUBLIC_SUPABASE_URL
- SUPABASE_SERVICE_ROLE_KEY (must be kept secret; DO NOT commit to source control)

Client-side environment variables for read-only operations:
- NEXT_PUBLIC_SUPABASE_ANON_KEY

New API endpoint:
- POST /api/waitlist/subscribe
  - Body: { email: string }
  - Server uses the Service Role key to insert into the waitlist table in infra/schema.sql.

Run the database migration (infra/schema.sql) in your Supabase project before using the endpoint.

Security note: the service role key must only be set in server environment variables (Vercel/Netlify/other) and never exposed to the browser or committed.